#!/bin/bash

myname=$(logname)
mydirectory=tools

echo "[*]updating build"
apt update -y
apt upgrade -y
apt dist-upgrade -y
apt remove -y --purge rhythmbox ekiga totem transmission-gtk thunderbird apport
export DEBIAN_FRONTEND=noninteractive

echo "[*]installing packages"
apt install -y aptitude vlan reaver thc-ipv6 netwox nmap phantomjs nbtscan wireshark-qt tshark vlan dsniff tcpdump p7zip openvpn libssl-dev libmysqlclient-dev libjpeg-dev libnetfilter-queue-dev ettercap-text-only ghex pidgin pidgin-otr traceroute lft gparted autopsy subversion git gnupg htop ssh libpcap0.8-dev libimage-exiftool-perl aptitude p7zip-full proxychains curl terminator hydra hydra-gtk medusa irssi gnome-tweak-tool libtool build-essential rdesktop sshfs bzip2 extundelete rpcbind nfs-common gimp iw ldap-utils ntfs-3g samba-common samba-common-bin steghide whois aircrack-ng gnome-screenshot eog laptop-mode-tools openconnect gengetopt byacc flex cmake ophcrack gdb stunnel4 socat chromium-browser hping3 tcpreplay tcpick gufw xtightvncviewer scalpel foremost unrar rar secure-delete yersinia vmfs-tools net-tools gstreamer1.0-plugins-bad qemu-kvm qemu-utils binwalk qemu-system-x86 gvfs-fuse xdg-user-dirs gnome-applets-data gnome-applets git-core autoconf postgresql pgadmin3 screen keepass2 vim smbclient crunch ike-scan cifs-utils dos2unix macchanger onesixtyone vlc wxhexeditor
#echo "[*]installing language packages"
#apt install -y python-yara python-paramiko python-distorm3 python-beautifulsoup python-pygresql python-pil python-pycurl python-magic python-pyinotify python-configobj python-pexpect python-msgpack python-requests python-pefile python-ipy python-openssl python-pypcap python-dns python-dnspython python-crypto python-cryptography python-dev python-twisted python-nfqueue python-scapy python-capstone python-setuptools python-urllib3 python3-pip python-pip ruby ruby-dev ruby-bundler php7.2-cli php7.2-curl python-notify python-impacket golang-go

echo "[*]installing libraries"
apt install -y libappindicator1 libreadline-dev libcapstone3 libcapstone-dev libssl-dev zlib1g-dev libxml2-dev libxslt1-dev libyaml-dev libffi-dev libssh-dev libpq-dev libsqlite-dev libsqlite3-dev libpcap-dev libgmp3-dev libpcap-dev  libpcre3-dev libidn11-dev libcurl4-openssl-dev libpq5 libreadline5 libappindicator1 libindicator7 libnss3 libxss1 libncurses5-dev libncurses5 ocl-icd-libopencl1wget -nc https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
dpkg -i google-chrome-stable_current_amd64.deb
rm google-chrome-stable_current_amd64.deb

#install of gems
gem install snmp
gem install pcaprub
gem install rake


echo "[*]create default core tools directory"
mkdir /opt/$mydirectory
mkdir /opt/$mydirectory/cheatsheets
mkdir /opt/$mydirectory/cloud
mkdir /opt/$mydirectory/crypto
mkdir /opt/$mydirectory/databases
mkdir /opt/$mydirectory/escalation
mkdir /opt/$mydirectory/exploits
mkdir /opt/$mydirectory/forensics
mkdir /opt/$mydirectory/linux
mkdir /opt/$mydirectory/misc
mkdir /opt/$mydirectory/mobile
mkdir /opt/$mydirectory/network
mkdir /opt/$mydirectory/postexploitation
mkdir /opt/$mydirectory/pwcracking
mkdir /opt/$mydirectory/recon
mkdir /opt/$mydirectory/reverse
mkdir /opt/$mydirectory/social_engineering
mkdir /opt/$mydirectory/webapps
mkdir /opt/$mydirectory/websockets
mkdir /opt/$mydirectory/windows
mkdir /opt/$mydirectory/wireless
mkdir /opt/$mydirectory/wordlists

echo "[*]gather the metasploit repository"
cd /opt/$mydirectory/
curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall && \
  chmod 755 msfinstall && \
  ./msfinstall

echo "[*]gathering cheatsheets"
cd /opt/$mydirectory/cheatsheets
git clone https://github.com/HarmJ0y/CheatSheets
git clone https://github.com/aramosf/sqlmap-cheatsheet.git
git clone https://github.com/wsargent/docker-cheat-sheet.git
git clone https://github.com/paragonie/awesome-appsec.git
git clone https://github.com/enaqx/awesome-pentest
git clone https://github.com/GrrrDog/Java-Deserialization-Cheat-Sheet
git clone https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki
cd /opt/$mydirectory

echo "[*]installing cloud tools"
cd /opt/$mydirectory/cloud
git clone https://github.com/nccgroup/azucar
git clone https://github.com/nccgroup/ScoutSuite
git clone https://github.com/Azure/azure-cli
cd /opt/$mydirectory

echo "[*]installing tools to identify hashes"
cd /opt/$mydirectory/crypto
git clone https://github.com/SmeegeSec/HashTag.git
git clone https://github.com/psypanda/hashID.git
cd /opt/$mydirectory

echo "[*]installing database tools"
cd /opt/$mydirectory/databases
wget https://s3-eu-west-1.amazonaws.com/dist.neo4j.org/neo4j-community-4.2.3-unix.tar.gz

echo "[*]installing privesc tools"
cd /opt/$mydirectory/escalation
git clone https://github.com/PowerShellMafia/PowerSploit
git clone https://github.com/putterpanda/mimikittenz.git
git clone https://github.com/Kevin-Robertson/Inveigh.git
git clone https://github.com/xan7r/kerberoast.git
git clone https://github.com/breenmachine/RottenPotatoNG
git clone https://github.com/GhostPack/Rubeus
git clone https://github.com/GTFOBins/GTFOBins.github.io
git clone https://github.com/ankh2054/windows-pentest
git clone https://github.com/Anon-Exploiter/SUID3NUM
git clone https://github.com/milkdevil/UltimateAppLockerByPassList
git clone https://github.com/dxa4481/truffleHog
git clone https://github.com/samratashok/nishang.git
git clone https://github.com/rebootuser/LinEnum.git
git clone https://github.com/huntergregal/mimipenguin.git
git clone https://github.com/dafthack/DomainPasswordSpray
git clone https://github.com/FuzzySecurity/Unix-PrivEsc
git clone https://github.com/pentestmonkey/unix-privesc-check
git clone https://github.com/pentestmonkey/windows-privesc-check
git clone https://github.com/GDSSecurity/Windows-Exploit-Suggester
git clone https://github.com/PenturaLabs/Linux_Exploit_Suggester.git
git clone https://github.com/GhostPack/SafetyKatz
git clone https://github.com/leechristensen/SpoolSample
git clone https://github.com/mzet-/linux-exploit-suggester
mkdir /opt/$mydirectory/escalation/mimikatz
cd /opt/$mydirectory/escalation/mimikatz
wget -nc http://blog.gentilkiwi.com/downloads/mimikatz_trunk.zip
unzip -o  mimikatz_trunk.zip
rm -rf mimikatz_trunk.zip
cd /opt/$mydirectory

echo "[*]installing exploit related tools"
cd /opt/$mydirectory/exploits
git clone https://github.com/longld/peda.git
git clone https://github.com/govolution/avet
git clone https://github.com/g0tmi1k/exe2hex.git
git clone https://github.com/huntergregal/mimipenguin
git clone https://github.com/vulnersCom/getsploit
git clone https://github.com/trustedsec/unicorn
git clone https://github.com/tyranid/DotNetToJScript
git clone https://github.com/mdsecactivebreach/SharpShooter
git clone https://github.com/mdsecactivebreach/CACTUSTORCH
git clone https://github.com/anexia-it/winshock-test
git clone https://github.com/offensive-security/exploitdb
git clone https://github.com/toolswatch/vFeed.git
git clone https://github.com/secretsquirrel/the-backdoor-factory
git clone https://github.com/FuzzySecurity/PowerShell-Suite.git
git clone https://github.com/peewpw/Invoke-PSImage
git clone https://github.com/madmantm/powershell
git clone https://github.com/worawit/MS17-010
git clone https://github.com/offensive-security/exploitdb-bin-sploits
wget --header="Accept: text/html" --user-agent="MOZILLA" https://www.shellterproject.com/Downloads/Shellter/Latest/shellter.zip
cd /opt/$mydirectory

echo "[*]installing forensic tools"
cd /opt/$mydirectory/forensics
git clone https://github.com/volatilityfoundation/volatility.git
git clone https://github.com/sleuthkit/autopsy
cd /opt/$mydirectory

echo "[*]linux tools just in case no internets"
mkdir /opt/$mydirectory/linux/lin_tools
cd /opt/$mydirectory/linux/lin_tools
wget -nc "http://downloads.metasploit.com/data/releases/metasploit-latest-linux-x64-installer.run"
wget -nc "https://out7.hex-rays.com/files/idafree70_linux.run"
cd /opt/$mydirectory

echo "[*]misc scripts"
cd /opt/$mydirectory/misc
git clone https://github.com/ChrisTruncer/PenTestScripts.git
git clone https://github.com/Arno0x/CSharpScripts
cd /opt/$mydirectory

echo "[*]installing torbrowser"
mkdir /opt/$mydirectory/network/torbrowser
cd /opt/$mydirectory/network/torbrowser
wget -nc https://github.com/TheTorProject/gettorbrowser/releases/download/torbrowser-release/tor-browser-linux64-9.0.4_en-US.tar.xz
tar -xf tor-browser-linux64-9.0.4_en-US.tar.xz
rm -rf tor-browser-linux64-9.0.4_en-US.tar.xz
cd /opt/$mydirectory

echo "[*]gathering php reverse shell"
mkdir /opt/$mydirectory/network/reverse_shells
cd /opt/$mydirectory/network/reverse_shells
wget -nc http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz
tar -xf /opt/$mydirectory/network/reverse_shells/php-reverse-shell-1.0.tar.gz
rm -rf /opt/$mydirectory/network/reverse_shells/php-reverse-shell-1.0.tar.gz
git clone https://github.com/0x00-0x00/ShellPop
cd /opt/$mydirectory

echo "[*]installing tools for mitm/network/scada"
cd /opt/$mydirectory/network/
wget -nc https://raw.githubusercontent.com/vulnersCom/nmap-vulners/master/vulners.nse -O /usr/share/nmap/scripts/vulners.nse
git clone https://github.com/scadastrangelove/SCADAPASS.git
git clone https://github.com/SySS-Research/Seth
git clone https://github.com/DanMcInerney/icebreaker.git
git clone https://github.com/byt3bl33d3r/DeathStar.git
git clone https://github.com/DanMcInerney/net-creds
git clone https://github.com/inquisb/keimpx
git clone https://github.com/mlazarov/ddos-stress.git
git clone https://github.com/sensepost/DET.git
git clone https://github.com/DanMcInerney/LANs.py.git
git clone https://github.com/lgandx/Responder
git clone https://github.com/lgandx/Responder-Windows
git clone https://github.com/tintinweb/striptls
git clone https://github.com/arthepsy/ssh-audit.git
git clone https://github.com/DanMcInerney/net-creds.git
git clone https://github.com/nccgroup/redsnarf
git clone https://github.com/m57/ARDT.git
git clone https://github.com/vanhauser-thc/thc-ipv6.git
git clone https://github.com/commonexploits/vlan-hopping
git clone https://github.com/Hood3dRob1n/Reverser.git
git clone https://github.com/p0f/p0f
git clone https://github.com/stackp/Droopy
git clone https://github.com/pentestmonkey/gateway-finder
git clone --recursive https://github.com/0x90/vpn-arsenal
go get github.com/bettercap/bettercap
mv /home/$myname/go /opt/$mydirectory/network/bettercap
git clone https://github.com/robertdavidgraham/masscan.git
cd /opt/$mydirectory/network/masscan/bin
make
cd /opt/$mydirectory/network/
git clone https://github.com/byt3bl33d3r/MITMf.git
cd /opt/$mydirectory/network/MITMf
pip install BeautifulSoup4
pip install -r requirements.txt
pip install mysql-python
cd /opt/$mydirectory/network/MITMf/libs/bdfactory/
git clone https://github.com/secretsquirrel/the-backdoor-factory.git .
cd /opt/$mydirectory/network/
git clone https://github.com/byt3bl33d3r/CrackMapExec.git
cd /opt/$mydirectory/network/CrackMapExec
pip install -r requirements.txt
python setup.py install
cd /opt/$mydirectory

echo "[*]installing post-exploitation tools"
cd /opt/$mydirectory/postexploitation
git clone https://github.com/AlessandroZ/LaZagne.git
git clone https://github.com/CoreSecurity/impacket.git
git clone https://github.com/EmpireProject/Empire.git
git clone https://github.com/nccgroup/SSHession
pip install ldap3
cd /opt/$mydirectory

echo "[*]installing pwcracking tools"
cd /opt/$mydirectory/pwcracking/
git clone https://github.com/lanjelot/patator.git
git clone https://github.com/mikesiegel/ews-crack
git clone https://github.com/galkan/crowbar
git clone https://github.com/philsmd/7z2hashcat
git clone https://github.com/theevilbit/ciscot7
git clone https://github.com/magnumripper/JohnTheRipper.git
cd /opt/$mydirectory/pwcracking/JohnTheRipper/src
./configure
make
mkdir /opt/$mydirectory/pwcracking/hashcat
cd /opt/$mydirectory/pwcracking/hashcat
wget -nc https://github.com/hashcat/hashcat/releases/download/v6.1.1/hashcat-6.1.1.7z
7z x hashcat-6.1.1.7z
rm -rf /opt/$mydirectory/pwcracking/hashcat/hashcat-6.1.1.7z
git clone https://github.com/hashcat/hashcat-utils
cd /opt/$mydirectory

echo "[*]installing other reconnaissance tools"
cd /opt/$mydirectory/recon
git clone https://github.com/guelfoweb/knock.git
git clone https://github.com/laramies/theHarvester.git
git clone https://github.com/eth0izzle/bucket-stream
git clone https://github.com/dmuhs/pastebin-scraper.git
git clone https://github.com/breenmachine/httpscreenshot
git clone https://github.com/mschwager/gitem
git clone https://github.com/zricethezav/gitleaks
git clone https://github.com/hardikvasa/google-images-download.git
git clone https://github.com/m0rtem/CloudFail
git clone https://github.com/laramies/metagoofil
git clone https://github.com/TheRook/subbrute.git
git clone https://github.com/ejcx/subdomainer.git
git clone https://github.com/aboul3la/Sublist3r.git
git clone https://github.com/ChrisTruncer/EyeWitness.git
git clone https://github.com/michenriksen/aquatone
git clone https://github.com/hatRiot/clusterd.git
git clone https://github.com/dmuhs/pastebin-scraper
git clone https://github.com/nyxgeek/o365recon
git clone https://github.com/darkoperator/dnsrecon.git
git clone https://github.com/urbanadventurer/WhatWeb.git
git clone https://github.com/leebaird/discover.git
git clone https://github.com/Mr-Un1k0d3r/RedTeamPowershellScripts.git
git clone https://github.com/portcullislabs/enum4linux
git clone https://github.com/trustedsec/ridenum
git clone https://github.com/BloodHoundAD/BloodHound
wget -nc https://github.com/BloodHoundAD/BloodHound/releases/download/2.2.1/BloodHound-linux-x64.zip
wget -nc https://neo4j.com/artifact.php?name=neo4j-community-4.0.0-unix.tar.gz
git clone https://github.com/evict/SSHScan
git clone https://github.com/portcullislabs/rdp-sec-check
git clone https://github.com/ShawnDEvans/smbmap
git clone https://github.com/lanmaster53/recon-ng
git clone https://github.com/mschwager/fierce
git clone https://github.com/makefu/dnsmap.git
cd /opt/$mydirectory/recon/dnsmap
make
cd /opt/$mydirectory

echo "[*]installing tools for reverse engineering"
cd /opt/$mydirectory/reverse/
git clone https://github.com/radareorg/radare2
git clone https://github.com/radareorg/cutter
git clone https://github.com/Gallopsled/pwntools.git
git clone https://github.com/hasherezade/shellconv.git
git clone https://github.com/botherder/viper.git
git clone https://github.com/java-decompiler/jd-gui
git clone https://github.com/skylot/jadx
git clone https://github.com/mirror/firmware-mod-kit.git
cd /opt/$mydirectory

echo "[*]installing tools for social engineering"
cd /opt/$mydirectory/social_engineering
git clone https://github.com/trustedsec/social-engineer-toolkit.git
git clone https://github.com/philwantsfish/shard
git clone https://github.com/mwrlabs/XRulez.git
git clone https://github.com/dafthack/MailSniper.git
git clone https://github.com/ustayready/CredSniper
git clone https://github.com/elceef/dnstwist
wget -nc https://github.com/gophish/gophish/releases/download/v0.5.0/gophish-v0.5.0-linux-64bit.zip
cd /opt/$mydirectory

echo "[*]installing burpfree"
cd /opt/$mydirectory/webapps
mkdir /opt/$mydirectory/webapps/burp_proxy
cd /opt/$mydirectory/webapps/burp_proxy
curl https://portswigger.net/DownloadUpdate.ashx?Product=Free -o burpsuite_free.jar
cd /opt/$mydirectory

echo "[*]installing arachni"
mkdir /opt/$mydirectory/webapps/arachni
cd /opt/$mydirectory/webapps/arachni
wget -nc https://github.com/Arachni/arachni/releases/download/v1.5.1/arachni-1.5.1-0.5.12-linux-x86_64.tar.gz
tar -xf arachni-1.5.1-0.5.12-linux-x86_64.tar.gz
rm -rf arachni-1.5.1-0.5.12-linux-x86_64.tar.gz
cd /opt/$mydirectory

echo "[*]installing other webapp tools"
cd /opt/$mydirectory/webapps
git clone https://github.com/wallarm/jwt-heartbreaker
git clone https://github.com/XiphosResearch/exploits.git
git clone https://github.com/UltimateHackers/XSStrike
git clone https://github.com/nahamsec/JSParser.git
git clone https://github.com/spinkham/skipfish.git
git clone https://github.com/joaomatosf/jexboss.git
git clone https://github.com/internetwache/GitTools.git
git clone https://github.com/OsandaMalith/LFiFreak
git clone https://github.com/maurosoria/dirsearch.git
git clone https://github.com/D35m0nd142/LFISuite.git
git clone https://github.com/P0cL4bs/Kadimus
git clone https://github.com/stasinopoulos/commix.git
git clone https://github.com/kost/dvcs-ripper
git clone https://github.com/mandatoryprogrammer/xssless.git
git clone https://github.com/tennc/fuzzdb.git
git clone https://github.com/tennc/webshell
git clone https://github.com/swisskyrepo/PayloadsAllTheThings
git clone https://github.com/CaledoniaProject/AxisInvoker.git
git clone https://github.com/vs4vijay/heartbleed.git
git clone https://github.com/beefproject/beef
git clone https://github.com/Dionach/CMSmap.git
git clone https://github.com/droope/droopescan.git
git clone https://github.com/gfoss/attacking-drupal.git
git clone https://github.com/sullo/nikto.git
git clone https://github.com/gabtremblay/tachyon.git
git clone https://github.com/sqlmapproject/sqlmap.git
git clone https://github.com/WebBreacher/tilde_enum.git
git clone https://github.com/eschultze/URLextractor.git
git clone https://github.com/mazen160/struts-pwn_CVE-2017-9805
git clone https://github.com/leonjza/wordpress-shell
git clone https://github.com/orf/xcat
wget -nc http://testssl.sh/testssl.sh
wget -nc "https://downloads.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirb%2Ffiles%2F&ts=1503500072&use_mirror=astuteinternet" -O dirb222.tar.gz
tar -xf dirb222.tar.gz
rm -rf /opt/$mydirectory/webapps/dirb222.tar.gz
chmod -R 755 dirb222/
cd /opt/$mydirectory/webapps/dirb222
./configure
make
cd /opt/$mydirectory/webapps
wget -nc "http://downloads.sourceforge.net/project/dirbuster/DirBuster%20%28jar%20%2B%20lists%29/1.0-RC1/DirBuster-1.0-RC1.tar.bz2?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fdirbuster%2Ffiles%2FDirBuster%2520%2528jar%2520%252B%2520lists%2529%2F1.0-RC1%2F&ts=1443459199&use_mirror=iweb" -O DirBuster-1.0-RC1.tar.bz2
bunzip2 DirBuster-1.0-RC1.tar.bz2
tar -xf DirBuster-1.0-RC1.tar
rm -rf DirBuster-1.0-RC1.tar
cd /opt/$mydirectory/webapps
git clone https://github.com/epinna/weevely3.git
cd /opt/$mydirectory/webapps/weevely3
pip install -r requirements.txt
cd /opt/$mydirectory

echo "[*]installing websocket tools"
cd /opt/$mydirectory/websockets
git clone "https://github.com/vi/websocat"

echo "[*]requirements for wpscan"
cd /opt/$mydirectory/webapps
git clone https://github.com/wpscanteam/wpscan.git
cd /opt/$mydirectory/webapps/wpscan
bundle install
cd /opt/$mydirectory

echo "[*]windows tools just in case no internets / also might be flagged by pesky webfiltering systems"
mkdir /opt/$mydirectory/windows/win_tools
cd /opt/$mydirectory/windows/win_tools
wget -nc "http://www.oxid.it/downloads/ca_setup.exe"
wget -nc "http://sniff.su/Intercepter-NG.v1.0.zip"
wget -nc "http://downloads.metasploit.com/data/releases/metasploit-latest-windows-installer.exe"
wget -nc "http://www.ollydbg.de/odbg200.zip"
wget -nc "http://www.ollydbg.de/odbg110.zip"
wget -nc "https://out7.hex-rays.com/files/idafree70_windows.exe"
wget -nc "https://download.sysinternals.com/files/SysinternalsSuite.zip"
wget -nc "https://download.sysinternals.com/files/PSTools.zip"
wget -nc "https://download.sysinternals.com/files/Procdump.zip"
cd /opt/$mydirectory

echo "[*]installing wireless et wps tools"
cd /opt/$mydirectory/wireless
git clone https://github.com/DanMcInerney/wifijammer.git
git clone https://github.com/derv82/wifite2
git clone https://github.com/OpenSecurityResearch/hostapd-wpe.git
git clone https://github.com/sophron/wifiphisher.git
git clone https://github.com/s0lst1c3/eaphammer.git
git clone https://github.com/Tylous/SniffAir.git
git clone https://github.com/tehw0lf/airbash.git
cd /opt/$mydirectory

echo "[*]wordlists gathering"
cd /opt/$mydirectory/wordlists
git clone https://github.com/danielmiessler/SecLists.git
wget -nc http://downloads.skullsecurity.org/passwords/rockyou.txt.bz2
wget -nc http://www.tekdefense.com/downloads/wordlists/1aNormusWL.zip
wget -nc http://www.tekdefense.com/downloads/wordlists/KippoWordlist.txt
git clone https://github.com/digininja/CeWL.git
cd /opt/$mydirectory

echo "[*]correcting user-rights"
chown -R $myname:$myname /opt/$mydirectory

echo "[*]hardening services"
systemctl stop ssh
systemctl stop rpcbind
systemctl stop postgresql

sysctl -w net.ipv6.conf.all.disable_ipv6=0
sysctl -w net.ipv6.conf.default.disable_ipv6=0

echo "[*]updating graphics drives"
ubuntu-drivers autoinstall

echo "Feel free to add the following line to /etc/sudoers using sudo visudo:"
echo "$myname	ALL=(ALL) NOPASSWD: ALL"

echo "[+] DONE! Now reboot!"
